{"ast":null,"code":"import _objectSpread from \"/Users/alexstolzoff/Desktop/Projects/es6-editor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/alexstolzoff/Desktop/Projects/es6-editor/src/App.js\";\nimport React, { Component } from 'react';\nimport { Markup, Editor, Container, Column, Row, RuleInput, RuleLabel, StyleInput, Document, Button } from './styled';\nimport hljs from 'highlight.js';\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      editor: \"\",\n      name0: \"\",\n      begin0: \"\",\n      end0: \"\",\n      style0: \"\",\n      rules: 1\n    };\n\n    this.handleChange = event => {\n      let _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.rules = () => {\n      let rules = this.state.rules;\n      let array = [];\n      let fields = ['name', 'begin', 'end'];\n\n      for (let i = 0; i < rules; i = i + 1) {\n        array.push(React.createElement(Row, {\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 34\n          },\n          __self: this\n        }, React.createElement(Column, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 37\n          },\n          __self: this\n        }, fields.map((field, index) => {\n          return React.createElement(Column, {\n            key: index,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 40\n            },\n            __self: this\n          }, React.createElement(RuleLabel, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 43\n            },\n            __self: this\n          }, field), React.createElement(RuleInput, {\n            value: this.state[\"\".concat(field).concat(i)],\n            onChange: this.handleChange,\n            name: \"\".concat(field).concat(i),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 44\n            },\n            __self: this\n          }));\n        })), React.createElement(StyleInput, {\n          value: this.state[\"style\".concat(i)],\n          onChange: this.handleChange,\n          name: \"style\".concat(i),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53\n          },\n          __self: this\n        })));\n      }\n\n      return array;\n    };\n\n    this.newFields = () => {\n      this.setState(prevState => {\n        let rules = prevState.rules;\n        let fields = ['name', 'begin', 'end', 'style'];\n        let inputValues = {};\n        fields.forEach(field => {\n          inputValues = _objectSpread({}, inputValues, {\n            [\"\".concat(field).concat(rules)]: ''\n          });\n        });\n        rules++;\n        console.log(_objectSpread({\n          rules\n        }, inputValues));\n        return _objectSpread({\n          rules\n        }, inputValues);\n      });\n    };\n\n    this.convertToMarkup = (text = \"\") => {\n      return {\n        __html: hljs.highlightAuto(text).value\n      };\n    };\n\n    this.language = newRules => {\n      return () => ({\n        contains: [...newRules]\n      });\n    };\n\n    this.registerLanguage = state => {\n      let rules = state.rules;\n      let ruleObjects = [];\n\n      for (let i = 0; i < rules; i = i + 1) {\n        let newRule = {\n          className: state[\"name\".concat(i)],\n          begin: state[\"begin\".concat(i)],\n          end: state[\"end\".concat(i)]\n        };\n        let className = newRule.className,\n            begin = newRule.begin,\n            end = newRule.end;\n        console.log(className.length, begin.length, end.length);\n\n        if (className.length > 0 && begin.length > 0 && end.lentgh > 0) {\n          begin = new RegExp(begin);\n          end = new RegExp(end);\n          ruleObjects.push(newRule);\n          console.log('success');\n        }\n      }\n\n      hljs.registerLanguage('language', this.language(ruleObjects));\n      hljs.configure({\n        languages: ['language']\n      });\n    };\n\n    this.prepareStyles = () => {\n      let rules = this.state.rules;\n      let styles = [];\n\n      for (let i = 0; i < rules; i = i + 1) {\n        styles.push(\"\\n        .hljs-\".concat(this.state['name' + i], \"{\\n          \").concat(this.state['style' + i], \"\\n        }\\n      \"));\n      }\n\n      let newStyles = \"\".concat(styles).replace(',', \"\");\n      console.log(newStyles);\n      return newStyles;\n    };\n  }\n\n  componentWillUpdate(nextProps, nextState) {\n    this.registerLanguage(nextState);\n    console.log(nextState);\n  }\n\n  render() {\n    let editor = this.state.editor; //object destructuring\n\n    let handleChange = this.handleChange,\n        newFields = this.newFields,\n        rules = this.rules,\n        convertToMarkup = this.convertToMarkup,\n        prepareStyles = this.prepareStyles;\n    return React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(Column, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, rules(), React.createElement(Button, {\n      onClick: newFields,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, \"New Rule\")), React.createElement(Column, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(Button, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \"Random Text\"), React.createElement(Document, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(Editor, {\n      name: \"editor\",\n      value: editor,\n      onChange: handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }), React.createElement(Markup, {\n      customStyles: prepareStyles(),\n      dangerouslySetInnerHTML: convertToMarkup(editor),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/alexstolzoff/Desktop/Projects/es6-editor/src/App.js"],"names":["React","Component","Markup","Editor","Container","Column","Row","RuleInput","RuleLabel","StyleInput","Document","Button","hljs","App","state","editor","name0","begin0","end0","style0","rules","handleChange","event","target","name","value","setState","array","fields","i","push","map","field","index","newFields","prevState","inputValues","forEach","console","log","convertToMarkup","text","__html","highlightAuto","language","newRules","contains","registerLanguage","ruleObjects","newRule","className","begin","end","length","lentgh","RegExp","configure","languages","prepareStyles","styles","newStyles","concat","replace","componentWillUpdate","nextProps","nextState","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport { Markup, Editor, Container, Column, Row, RuleInput, RuleLabel, StyleInput, \n        Document, Button} from './styled'\nimport hljs from 'highlight.js'\n\n\n\nclass App extends Component {\n\n  state = {\n    editor: \"\",\n    name0: \"\",\n    begin0: \"\",\n    end0: \"\",\n    style0: \"\",\n    rules: 1\n  }\n\n  handleChange = (event) => {\n      let {name, value} = event.target\n      this.setState({\n        [name]: value\n      })\n  }\n\n  rules = () => {\n    let { rules } = this.state\n    let array = []\n    let fields = ['name', 'begin', 'end']\n\n    for(let i = 0; i < rules; i = i + 1){\n\n      array.push(\n        <Row\n        key={i}\n        >\n          <Column>\n            {fields.map((field,index) => {\n              return (\n                <Column\n                  key={index}\n                >\n                  <RuleLabel>{field}</RuleLabel>\n                  <RuleInput\n                    value={this.state[`${field}${i}`]}\n                    onChange={this.handleChange}\n                    name={`${field}${i}`}\n                  />\n                </Column>\n            )\n            })}\n          </Column>\n            <StyleInput\n              value={this.state[`style${i}`]}\n              onChange={this.handleChange}\n              name={`style${i}`}\n            />\n        </Row>\n      )\n      }\n      return array\n  }\n\n  newFields = () => {\n    this.setState( (prevState) => {\n      let {rules} = prevState\n      \n      let fields = ['name', 'begin', 'end', 'style']\n      let inputValues = {}\n      fields.forEach( (field) => {\n        inputValues = {\n          ...inputValues,\n          [`${field}${rules}`]: ''\n        }\n      });\n      rules++\n      console.log({\n        rules,\n        ...inputValues\n      })\n      return{\n        rules,\n        ...inputValues\n      }\n    })\n  }\n\n  convertToMarkup = (text = \"\") => {\n    return {\n      __html: hljs.highlightAuto(text).value\n    }\n  }\n\n  language = (newRules) => {\n    return () => ({\n        contains: [\n          ...newRules\n        ]\n    })\n  }\n\n  registerLanguage = (state) => {\n    let {rules} = state\n    let ruleObjects = []\n\n    for (let i = 0; i < rules; i = i + 1){\n      let newRule = {\n        className: state[`name${i}`],\n        begin: state[`begin${i}`],\n        end: state[`end${i}`]\n      }\n      let {className, begin, end} = newRule\n      console.log(className.length, begin.length, end.length)\n      if(className.length > 0 && begin.length > 0 && end.lentgh > 0) {\n        begin = new RegExp(begin)\n        end = new RegExp(end)\n        ruleObjects.push(newRule)\n        console.log('success')\n      }\n      \n    }\n\n    hljs.registerLanguage('language', this.language(ruleObjects))\n    hljs.configure({\n      languages:['language']\n    })\n  }\n\n  componentWillUpdate(nextProps, nextState){\n    this.registerLanguage(nextState)\n    console.log(nextState)\n  }\n\n  prepareStyles = () => {\n    let {rules} = this.state\n    let styles = []\n    for(let i = 0; i < rules; i = i + 1){\n      styles.push(`\n        .hljs-${this.state['name' + i]}{\n          ${this.state['style' + i]}\n        }\n      `)\n    }\n\n    let newStyles = \"\".concat(styles).replace(',', \"\")\n    console.log(newStyles)\n    return newStyles\n  }\n\n  render(){\n    let {editor} = this.state\n    //object destructuring\n    let {handleChange, newFields, rules, convertToMarkup, prepareStyles} = this\n  return (\n    <Container>\n      <Column>\n      {rules()}\n        <Button onClick={newFields}>\n         New Rule\n        </Button>\n      </Column>\n      <Column>\n        <Button>\n          Random Text\n        </Button>\n        <Document>\n          <Editor\n            name={\"editor\"}\n            value={editor}\n            onChange={handleChange}\n          />\n          <Markup\n            customStyles={prepareStyles()}\n            dangerouslySetInnerHTML={convertToMarkup(editor)}\n          />\n        </Document>\n      </Column>\n    </Container>\n  );\n}\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}